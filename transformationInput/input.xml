<AnsibleDeploymentModel><plays><plays><name>Deploy OpenTelemetry Demo</name><become>true</become><hosts><hosts><hostName>localhost</hostName><vars><vars><name>ansible_connection</name><value>local</value></vars></vars><group>all</group></hosts></hosts><pre_tasks><pre_tasks><name>Ensure default network is created</name><vars/><become>false</become><action><type>docker_network</type><name>opentelemetry-demo</name><driver>bridge</driver></action><loop/></pre_tasks></pre_tasks><tasks/><post_tasks><post_tasks><name>Ensure services are enabled to start at boot</name><vars/><become>false</become><action><type>community.general.launchd</type><name>item</name><state></state><enabled>true</enabled></action><loop><loop>mongo</loop><loop>recommendationservice</loop><loop>accountingservice</loop><loop>emailservice</loop><loop>frauddetectionserice</loop><loop>valkeycart</loop><loop>productcatalogservice</loop><loop>jaeger</loop><loop>frontendproxy</loop><loop>loadgenerator</loop><loop>otelcol</loop><loop>adservice</loop><loop>checkoutservice</loop><loop>grafana</loop><loop>imageprovider</loop><loop>opensearch</loop><loop>shippingservice</loop><loop>flagd</loop><loop>kafka</loop><loop>prometheus</loop><loop>paymentservice</loop><loop>quoteservice</loop><loop>frontend</loop><loop>cartservice</loop></loop></post_tasks><post_tasks><name>Ensure services are started</name><vars/><become>false</become><action><type>community.general.launchd</type><name>item</name><state>started</state><enabled>false</enabled></action><loop><loop>mongo</loop><loop>recommendationservice</loop><loop>accountingservice</loop><loop>emailservice</loop><loop>frauddetectionserice</loop><loop>valkeycart</loop><loop>productcatalogservice</loop><loop>jaeger</loop><loop>frontendproxy</loop><loop>loadgenerator</loop><loop>otelcol</loop><loop>adservice</loop><loop>checkoutservice</loop><loop>grafana</loop><loop>imageprovider</loop><loop>opensearch</loop><loop>shippingservice</loop><loop>flagd</loop><loop>kafka</loop><loop>prometheus</loop><loop>paymentservice</loop><loop>quoteservice</loop><loop>frontend</loop><loop>cartservice</loop></loop></post_tasks></post_tasks><roles><roles><name>shippingservice</name><tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-shippingservice:1.11.1-shippingservice</name><source>pull</source></action><loop/></tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>shippingservice</name><image>ghcr.io/open-telemetry/demo:1.11.1-shippingservice</image><restart_policy>unless-stopped</restart_policy><memory>20M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>QUOTE_SERVICE_ADDR</name><value>http://quoteservice:8090</value></env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4317</value></env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=shippingservice,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>OTEL_SERVICE_NAME</name><value>shippingservice</value></env><env><name>SHIPPING_SERVICE_PORT</name><value>50050</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>tag</name><value>shippingservice</value></log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>quoteservice_addr</name><value>http://quoteservice:8090</value></defaults><defaults><name>memory_limit</name><value>20M</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-shippingservice</value></defaults><defaults><name>service_name</name><value>shippingservice</value></defaults><defaults><name>ports</name><value>50050</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies></dependencies><files/></roles><roles><name>valkeycart</name><tasks/><handlers/><vars/><defaults><defaults><name>service_name</name><value>valkeycart</value></defaults><defaults><name>memory_limit</name><value>20M</value></defaults><defaults><name>ports</name><value>6379</value></defaults><defaults><name>user</name><value>valkey</value></defaults><defaults><name>image_name</name><value>valkey/valkey:8.0-alpine</value></defaults></defaults><dependencies/><files/></roles><roles><name>quoteservice</name><tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-quoteservice:1.11.1-quoteservice</name><source>pull</source></action><loop/></tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>quoteservice</name><image>ghcr.io/open-telemetry/demo:1.11.1-quoteservice</image><restart_policy>unless-stopped</restart_policy><memory>40M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=quoteservice,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>QUOTE_SERVICE_PORT</name><value>8090</value></env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4318</value></env><env><name>OTEL_PHP_INTERNAL_METRICS_ENABLED</name><value>true</value></env><env><name>OTEL_SERVICE_NAME</name><value>quoteservice</value></env><env><name>OTEL_PHP_AUTOLOAD_ENABLED</name><value>true</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>tag</name><value>quoteservice</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>otel_php_features</name><value>true</value></defaults><defaults><name>memory_limit</name><value>40M</value></defaults><defaults><name>ports</name><value>8090</value></defaults><defaults><name>service_name</name><value>quoteservice</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-quoteservice</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies></dependencies><files/></roles><roles><name>currencyservice</name><tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>currencyservice</name><image>ghcr.io/open-telemetry/demo:1.11.1-currencyservice</image><restart_policy>unless-stopped</restart_policy><memory>20M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4317</value></env><env><name>CURRENCY_SERVICE_PORT</name><value>7001</value></env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=currencyservice,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>VERSION</name><value>1.11.1</value></env><env><name>OTEL_SERVICE_NAME</name><value>currencyservice</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>max-size</name><value>5m</value></log_options><log_options><name>tag</name><value>currencyservice</value></log_options></log_options></action><loop/></tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-currencyservice:1.11.1-currencyservice</name><source>pull</source></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>logs_exporter</name><value>otlp</value></defaults><defaults><name>ports</name><value>7001</value></defaults><defaults><name>service_name</name><value>currencyservice</value></defaults><defaults><name>memory_limit</name><value>20M</value></defaults><defaults><name>otlp_metrics_temporality_preference</name><value>cumulative</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-currencyservice</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies></dependencies><files/></roles><roles><name>flagd</name><tasks/><handlers/><vars/><defaults><defaults><name>image_name</name><value>ghcr.io/open-feature/flagd:v0.11.2</value></defaults><defaults><name>memory_limit</name><value>50M</value></defaults><defaults><name>volumes</name><value>./roles/flagd/files/demo.flagd.json:/etc/flagd/demo.flagd.json</value></defaults><defaults><name>service_name</name><value>flagd</value></defaults><defaults><name>ports</name><value>8013</value></defaults><defaults><name>command</name><value>["start", "--uri", "file:./etc/flagd/demo.flagd.json"]</value></defaults></defaults><dependencies/><files><files><path>/<absolute-path>/ansible/roles/flagd/files/demo.flagd.json</path></files></files></roles><roles><name>jaeger</name><tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>jaegertracing/all-in-one:1.60</name><source>pull</source></action><loop/></tasks><tasks><name>Deploy Service</name><vars/><become>true</become><action><type>docker_container</type><name>jaeger</name><image>jaegertracing/all-in-one:1.60</image><restart_policy>unless-stopped</restart_policy><memory>400M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>METRICS_STORAGE_TYPE</name><value>prometheus</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>tag</name><value>jaeger</value></log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>ports</name><value>16686</value></defaults><defaults><name>memory_limit</name><value>400M</value></defaults><defaults><name>command</name><value>- "--memory.max-traces=5000" - "--query.base-path=/jaeger/ui" - "--prometheus.server-url=http://prometheus:9090" - "--prometheus.query.normalize-calls=true" - "--prometheus.query.normalize-duration=true"</value></defaults><defaults><name>metrics_storage_type</name><value>prometheus</value></defaults><defaults><name>ports</name><value>4317</value></defaults><defaults><name>service_name</name><value>jaeger</value></defaults><defaults><name>image_name</name><value>jaegertracing/all-in-one:1.60</value></defaults></defaults><dependencies/><files/></roles><roles><name>adservice</name><tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>adservice</name><image>ghcr.io/open-telemetry/demo:1.11.1-adservice</image><restart_policy>unless-stopped</restart_policy><memory>300M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_SERVICE_NAME</name><value>adservice</value></env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=adservice,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4318</value></env><env><name>FLAGD_HOST</name><value>flagd</value></env><env><name>FLAGD_PORT</name><value>8013</value></env><env><name>AD_SERVICE_PORT</name><value>9555</value></env><env><name>OTEL_LOGS_EXPORTER</name><value>otlp</value></env><env><name>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE</name><value>cumulative</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>tag</name><value>adservice</value></log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-adservice:1.11.1-adservice</name><source>pull</source></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>service_name</name><value>adservice</value></defaults><defaults><name>ports</name><value>9555</value></defaults><defaults><name>logs_exporter</name><value>otlp</value></defaults><defaults><name>memory_limit</name><value>300M</value></defaults><defaults><name>otlp_metrics_temporality_preference</name><value>cumulative</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-adservice</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies><dependencies>flagd</dependencies></dependencies><files/></roles><roles><name>prometheus</name><tasks/><handlers/><vars/><defaults><defaults><name>command</name><value>--web.console.templates=/etc/prometheus/consoles --web.console.libraries=/etc/prometheus/console_libraries --storage.tsdb.retention.time=1h --config.file=/etc/prometheus/prometheus-config.yaml --storage.tsdb.path=/prometheus --web.enable-lifecycle --web.route-prefix=/ --enable-feature=exemplar-storage --enable-feature=otlp-write-receiver</value></defaults><defaults><name>memory_limit</name><value>300M</value></defaults><defaults><name>ports</name><value>9090:9090</value></defaults><defaults><name>service_name</name><value>prometheus</value></defaults><defaults><name>image_name</name><value>quay.io/prometheus/prometheus:v2.54.1</value></defaults><defaults><name>volumes</name><value>./roles/prometheus/files/prometheus-config.yaml:/etc/prometheus/prometheus-config.yaml</value></defaults></defaults><dependencies/><files><files><path>/<absolute-path>/ansible/roles/prometheus/files/prometheus-config.yaml</path></files></files></roles><roles><name>otelcol</name><tasks><tasks><name>Deploy Service</name><vars/><become>true</become><action><type>docker_container</type><name>otelcol</name><image>otel/opentelemetry-collector-contrib:0.104.0</image><restart_policy>unless-stopped</restart_policy><memory>200M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_COLLECTOR_HOST</name><value>otelcol</value></env><env><name>OTEL_COLLECTOR_PORT_HTTP</name><value>4318</value></env><env><name>ENVOY_PORT</name><value>8080</value></env><env><name>OTEL_COLLECTOR_PORT_GRPC</name><value>4317</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>tag</name><value>otelcol</value></log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>otel/opentelemetry-collector-contrib:0.104.0</name><source>pull</source></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>volumes</name><value>./roles/otelcol/files/otelcol-config-extras.yml:/etc/otelcol-config-extras.yml</value></defaults><defaults><name>volumes</name><value>./roles/otelcol/files/otelcol-config.yml:/etc/otelcol-config.yml</value></defaults><defaults><name>memory_limit</name><value>200M</value></defaults><defaults><name>command</name><value>"--config=/etc/otelcol-config.yml" "--config=/etc/otelcol-config-extras.yml"</value></defaults><defaults><name>volumes</name><value>/var/run/docker.sock:/var/run/docker.sock:ro</value></defaults><defaults><name>user</name><value>0:0</value></defaults><defaults><name>image_name</name><value>otel/opentelemetry-collector-contrib:0.104.0</value></defaults><defaults><name>ports</name><value>4317</value></defaults><defaults><name>ports</name><value>4318</value></defaults><defaults><name>service_name</name><value>otelcol</value></defaults></defaults><dependencies/><files><files><path>/<absolute-path>/ansible/roles/otelcol/files/otelcol-config-extras.yml</path></files><files><path>/<absolute-path>/ansible/roles/otelcol/files/otelcol-config.yml</path></files></files></roles><roles><name>frontendproxy</name><tasks/><handlers/><vars/><defaults><defaults><name>memory_limit</name><value>50M</value></defaults><defaults><name>ports</name><value>10000:10000</value></defaults><defaults><name>jaeger_host</name><value>jaeger</value></defaults><defaults><name>service_name</name><value>frontendproxy</value></defaults><defaults><name>imageprovider_port</name><value>8081</value></defaults><defaults><name>locust_web_port</name><value>8089</value></defaults><defaults><name>locust_web_host</name><value>loadgenerator</value></defaults><defaults><name>grafana_host</name><value>grafana</value></defaults><defaults><name>jaeger_port</name><value>16686</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-frontendproxy</value></defaults><defaults><name>frontend_port</name><value>8080</value></defaults><defaults><name>frontend_host</name><value>frontend</value></defaults><defaults><name>imageprovider_host</name><value>imageprovider</value></defaults><defaults><name>ports</name><value>8080:8080</value></defaults><defaults><name>grafana_port</name><value>3000</value></defaults></defaults><dependencies><dependencies>loadgenerator</dependencies><dependencies>grafana</dependencies><dependencies>frontend</dependencies><dependencies>jaeger</dependencies></dependencies><files/></roles><roles><name>imageprovider</name><tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>imageprovider</name><image>ghcr.io/open-telemetry/demo:1.11.1-imageprovider</image><restart_policy>unless-stopped</restart_policy><memory>120M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_COLLECTOR_HOST</name><value>otelcol</value></env><env><name>OTEL_SERVICE_NAME</name><value>imageprovider</value></env><env><name>VERSION</name><value>1.11.1</value></env><env><name>OTEL_COLLECTOR_PORT_GRPC</name><value>4317</value></env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=imageprovider,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>IMAGE_PROVIDER_PORT</name><value>8081</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>tag</name><value>imageprovider</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-imageprovider:1.11.1-imageprovider</name><source>pull</source></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-imageprovider</value></defaults><defaults><name>service_name</name><value>imageprovider</value></defaults><defaults><name>ports</name><value>8081</value></defaults><defaults><name>memory_limit</name><value>120M</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies></dependencies><files/></roles><roles><name>frauddetectionservice</name><tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-frauddetectionservice:1.11.1-frauddetectionservice</name><source>pull</source></action><loop/></tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>frauddetectionservice</name><image>ghcr.io/open-telemetry/demo:1.11.1-frauddetectionservice</image><restart_policy>unless-stopped</restart_policy><memory>300M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=frauddetectionservice,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>OTEL_SERVICE_NAME</name><value>frauddetectionservice</value></env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4318</value></env><env><name>FLAGD_HOST</name><value>flagd</value></env><env><name>KAFKA_SERVICE_ADDR</name><value>kafka:9092</value></env><env><name>FLAGD_PORT</name><value>8013</value></env><env><name>OTEL_INSTRUMENTATION_KAFKA_EXPERIMENTAL_SPAN_ATTRIBUTES</name><value>true</value></env><env><name>OTEL_INSTRUMENTATION_MESSAGING_EXPERIMENTAL_RECEIVE_TELEMETRY_ENABLED</name><value>true</value></env><env><name>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE</name><value>cumulative</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>tag</name><value>frauddetectionservice</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>service_name</name><value>frauddetectionservice</value></defaults><defaults><name>memory_limit</name><value>300M</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-frauddetectionservice</value></defaults><defaults><name>otlp_metrics_temporality_preference</name><value>cumulative</value></defaults><defaults><name>kafkaservice_addr</name><value>kafka:9092</value></defaults><defaults><name>otlp_experimental_features</name><value>true</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies><dependencies>kafka</dependencies></dependencies><files/></roles><roles><name>recommendationservice</name><tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-recommendationservice:1.11.1-recommendationservice</name><source>pull</source></action><loop/></tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>recommendationservice</name><image>ghcr.io/open-telemetry/demo:1.11.1-recommendationservice</image><restart_policy>unless-stopped</restart_policy><memory>40M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4317</value></env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=recommendationservice,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>FLAGD_HOST</name><value>flagd</value></env><env><name>FLAGD_PORT</name><value>8013</value></env><env><name>OTEL_SERVICE_NAME</name><value>recommendationservice</value></env><env><name>OTEL_PYTHON_LOG_CORRELATION</name><value>true</value></env><env><name>PRODUCT_CATALOG_SERVICE_ADDR</name><value>productcatalogservice:3550</value></env><env><name>PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION</name><value>python</value></env><env><name>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE</name><value>cumulative</value></env><env><name>RECOMMENDATION_SERVICE_PORT</name><value>9001</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>tag</name><value>recommendationservice</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>protobuf_python</name><value>python</value></defaults><defaults><name>memory_limit</name><value>40M</value></defaults><defaults><name>productcatalogservice_addr</name><value>productcatalogservice:3550</value></defaults><defaults><name>otel_python_features</name><value>true</value></defaults><defaults><name>service_name</name><value>recommendationservice</value></defaults><defaults><name>otlp_metrics_temporality_preference</name><value>cumulative</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-recommendationservice</value></defaults><defaults><name>ports</name><value>9001</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies><dependencies>flagd</dependencies><dependencies>productcatalogservice</dependencies></dependencies><files/></roles><roles><name>paymentservice</name><tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-paymentservice:1.11.1-paymentservice</name><source>pull</source></action><loop/></tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>paymentservice</name><image>ghcr.io/open-telemetry/demo:1.11.1-paymentservice</image><restart_policy>unless-stopped</restart_policy><memory>120M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>PAYMENT_SERVICE_PORT</name><value>50051</value></env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4317</value></env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=paymentservice,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>FLAGD_HOST</name><value>flagd</value></env><env><name>FLAGD_PORT</name><value>8013</value></env><env><name>OTEL_SERVICE_NAME</name><value>paymentservice</value></env><env><name>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE</name><value>cumulative</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>tag</name><value>paymentservice</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>ports</name><value>50051</value></defaults><defaults><name>service_name</name><value>paymentservice</value></defaults><defaults><name>otlp_metrics_temporality_preference</name><value>cumulative</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-paymentservice</value></defaults><defaults><name>memory_limit</name><value>120M</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies><dependencies>flagd</dependencies></dependencies><files/></roles><roles><name>emailservice</name><tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>emailservice</name><image>ghcr.io/open-telemetry/demo:1.11.1-emailservice</image><restart_policy>unless-stopped</restart_policy><memory>100M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_SERVICE_NAME</name><value>emailservice</value></env><env><name>APP_ENV</name><value>production</value></env><env><name>EMAIL_SERVICE_PORT</name><value>6060</value></env><env><name>OTEL_EXPORTER_OTLP_TRACES_ENDPOINT</name><value>http://otelcol:4318/v1/traces</value></env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=emailservice,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>tag</name><value>emailservice</value></log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-emailservice</name><source>pull</source></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>service_name</name><value>emailservice</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-emailservice</value></defaults><defaults><name>otlp_metrics_temporality_preference</name><value>cumulative</value></defaults><defaults><name>ports</name><value>6060</value></defaults><defaults><name>app_env</name><value>production</value></defaults><defaults><name>memory_limit</name><value>100M</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies></dependencies><files/></roles><roles><name>cartservice</name><tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-cartservice:1.11.1-cartservice</name><source>pull</source></action><loop/></tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>cartservice</name><image>ghcr.io/open-telemetry/demo:1.11.1-cartservice</image><restart_policy>unless-stopped</restart_policy><memory>160M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=cartservice,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>OTEL_SERVICE_NAME</name><value>cartservice</value></env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4317</value></env><env><name>REDIS_ADDR</name><value>valkeycart:6379</value></env><env><name>FLAGD_HOST</name><value>flagd</value></env><env><name>FLAGD_PORT</name><value>8013</value></env><env><name>ASPNETCORE_URLS</name><value>http://*:7070</value></env><env><name>CART_SERVICE_PORT</name><value>7070</value></env><env><name>VALKEY_ADDR</name><value>valkeycart:6379</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>tag</name><value>cartservice</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>service_name</name><value>cartservice</value></defaults><defaults><name>valkey_addr</name><value>valkeycart:6379</value></defaults><defaults><name>aspnetcore_urls</name><value>http://*:7070</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-cartservice</value></defaults><defaults><name>ports</name><value>7070</value></defaults><defaults><name>memory_limit</name><value>160M</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies><dependencies>flagd</dependencies><dependencies>valkeycart</dependencies></dependencies><files/></roles><roles><name>kafka</name><tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>kafka</name><image>ghcr.io/open-telemetry/demo:1.11.1-kafka</image><restart_policy>unless-stopped</restart_policy><memory>600M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4318</value></env><env><name>KAFKA_HEAP_OPTS</name><value>-Xmx400m -Xms400m</value></env><env><name>KAFKA_SERVICE_ADDR</name><value>kafka:9092</value></env><env><name>KAFKA_ADVERTISED_LISTENERS</name><value>PLAINTEXT://kafka:9092</value></env><env><name>OTEL_SERVICE_NAME</name><value>kafka</value></env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=kafka,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>tag</name><value>kafka</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-kafka:1.11.1-kafka</name><source>pull</source></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>ports</name><value>9092</value></defaults><defaults><name>memory_limit</name><value>600M</value></defaults><defaults><name>kafka_heap_opts</name><value>-Xmx400m -Xms400m</value></defaults><defaults><name>service_name</name><value>kafka</value></defaults><defaults><name>kafka_advertised_listeners</name><value>PLAINTEXT://{{ kafkaservice_addr }}</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-kafka</value></defaults><defaults><name>kafkaservice_addr</name><value>kafka:9092</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies></dependencies><files/></roles><roles><name>frontend</name><tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-frontend:1.11.1-frontend</name><source>pull</source></action><loop/></tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>frontend</name><image>ghcr.io/open-telemetry/demo:1.11.1-frontend</image><restart_policy>unless-stopped</restart_policy><memory>250M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>WEB_OTEL_SERVICE_NAME</name><value>frontend-web</value></env><env><name>FRONTEND_ADDR</name><value>frontend:8080</value></env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4317</value></env><env><name>CHECKOUT_SERVICE_ADDR</name><value>checkoutservice:5050</value></env><env><name>CURRENCY_SERVICE_ADDR</name><value>currencyservice:7001</value></env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=frontend,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>FLAGD_PORT</name><value>8013</value></env><env><name>RECOMMENDATION_SERVICE_ADDR</name><value>recommendationservice:9001</value></env><env><name>OTEL_SERVICE_NAME</name><value>frontend</value></env><env><name>PRODUCT_CATALOG_SERVICE_ADDR</name><value>productcatalogservice:3550</value></env><env><name>AD_SERVICE_ADDR</name><value>adservice:9555</value></env><env><name>CART_SERVICE_ADDR</name><value>cartservice:7070</value></env><env><name>FLAGD_HOST</name><value>flagd</value></env><env><name>ENV_PLATFORM</name><value>local</value></env><env><name>PORT</name><value>8080</value></env><env><name>KAFKA_SERVICE_ADDR</name><value>kafka:9092</value></env><env><name>VERSION</name><value>1.11.1</value></env><env><name>PUBLIC_OTEL_EXPORTER_OTLP_TRACES_ENDPOINT</name><value>http://otelcol:8080/otlp-http/v1/traces</value></env><env><name>otel_collector_host</name><value>otelcol</value></env><env><name>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE</name><value>cumulative</value></env><env><name>SHIPPING_SERVICE_ADDR</name><value>shippingservice:50050</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>tag</name><value>frontend</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>env_platform</name><value>local</value></defaults><defaults><name>checkoutservice_addr</name><value>checkoutservice:5050</value></defaults><defaults><name>productcatalogservice_addr</name><value>productcatalogservice:3550</value></defaults><defaults><name>recommendationservice_addr</name><value>recommendationservice:9001</value></defaults><defaults><name>memory_limit</name><value>250M</value></defaults><defaults><name>web_otel_service_name</name><value>frontend-web</value></defaults><defaults><name>shippingservice_addr</name><value>shippingservice:50050</value></defaults><defaults><name>ports</name><value>8080</value></defaults><defaults><name>cartservice_addr</name><value>cartservice:7070</value></defaults><defaults><name>otlp_metrics_temporality_preference</name><value>cumulative</value></defaults><defaults><name>adservice_addr</name><value>adservice:9555</value></defaults><defaults><name>currencyservice_addr</name><value>currencyservice:7001</value></defaults><defaults><name>otlp_exporter_traces_endpoint</name><value>http://otelcol:8080/otlp-http/v1/traces</value></defaults><defaults><name>service_name</name><value>frontend</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-frontend</value></defaults><defaults><name>kafkaservice_addr</name><value>kafka:9092</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies><dependencies>recommendationservice</dependencies><dependencies>adservice</dependencies><dependencies>checkoutservice</dependencies><dependencies>shippingservice</dependencies><dependencies>imageprovider</dependencies><dependencies>flagd</dependencies><dependencies>currencyservice</dependencies><dependencies>productcatalogservice</dependencies><dependencies>quoteservice</dependencies><dependencies>cartservice</dependencies></dependencies><files/></roles><roles><name>accountingservice</name><tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>accountingservice</name><image>ghcr.io/open-telemetry/demo:1.11.1-accountingservice</image><restart_policy>unless-stopped</restart_policy><memory>120M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_SERVICE_NAME</name><value>accountingservice</value></env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4318</value></env><env><name>KAFKA_SERVICE_ADDR</name><value>kafka:9092</value></env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=accountingservice,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE</name><value>cumulative</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>tag</name><value>accountingservice</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-accountingservice:1.11.1-accountingservice</name><source>pull</source></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>service_name</name><value>accountingservice</value></defaults><defaults><name>otlp_metrics_temporality_preference</name><value>cumulative</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-accountingservice</value></defaults><defaults><name>kafkaservice_addr</name><value>kafka:9092</value></defaults><defaults><name>memory_limit</name><value>120M</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies><dependencies>kafka</dependencies></dependencies><files/></roles><roles><name>mongo</name><tasks/><handlers/><vars/><defaults><defaults><name>memory_limit</name><value>256M</value></defaults><defaults><name>image_name</name><value>mongo:8.0.0-rc9</value></defaults><defaults><name>mongo_username</name><value>mongo</value></defaults><defaults><name>service_name</name><value>mongo</value></defaults><defaults><name>ports</name><value>27017:27017</value></defaults><defaults><name>mongo_password</name><value>mongo_product_catalog</value></defaults></defaults><dependencies/><files/></roles><roles><name>productcatalogservice</name><tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-productcatalogservice:1.11.1-productcatalogservice</name><source>pull</source></action><loop/></tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>productcatalogservice</name><image>ghcr.io/open-telemetry/demo:1.11.1-productcatalogservice</image><restart_policy>unless-stopped</restart_policy><memory>20M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4317</value></env><env><name>FLAGD_HOST</name><value>flagd</value></env><env><name>PRODUCT_CATALOG_SERVICE_PORT</name><value>3550</value></env><env><name>MONGO_PASSWORD</name><value>mongo_product_catalog</value></env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=productcatalogservice,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>MONGO_PORT</name><value>27017</value></env><env><name>FLAGD_PORT</name><value>8013</value></env><env><name>MONGO_USERNAME</name><value>mongo</value></env><env><name>MONGO_HOSTNAME</name><value>mongo</value></env><env><name>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE</name><value>cumulative</value></env><env><name>OTEL_SERVICE_NAME</name><value>productcatalogservice</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>tag</name><value>productcatalogservice</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>mongo_hostname</name><value>mongo</value></defaults><defaults><name>ports</name><value>3550</value></defaults><defaults><name>memory_limit</name><value>20M</value></defaults><defaults><name>otlp_metrics_temporality_preference</name><value>cumulative</value></defaults><defaults><name>mongo_port</name><value>27017</value></defaults><defaults><name>mongo_username</name><value>mongo</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-productcatalogservice</value></defaults><defaults><name>service_name</name><value>productcatalogservice</value></defaults><defaults><name>mongo_password</name><value>mongo_product_catalog</value></defaults></defaults><dependencies><dependencies>mongo</dependencies><dependencies>otelcol</dependencies><dependencies>flagd</dependencies></dependencies><files/></roles><roles><name>opensearch</name><tasks/><handlers/><vars/><defaults><defaults><name>service_name</name><value>opensearch</value></defaults><defaults><name>ports</name><value>9200</value></defaults><defaults><name>image_name</name><value>opensearchproject/opensearch:2.16.0</value></defaults><defaults><name>memory_limit</name><value>1G</value></defaults><defaults><name>ulimits</name><value>nofile:65536:65536</value></defaults><defaults><name>ulimits</name><value>memlock:-1:-1</value></defaults></defaults><dependencies/><files/></roles><roles><name>checkoutservice</name><tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-checkoutservice:1.11.1-checkoutservice</name><source>pull</source></action><loop/></tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>checkoutservice</name><image>ghcr.io/open-telemetry/demo:1.11.1-checkoutservice</image><restart_policy>unless-stopped</restart_policy><memory>120M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4317</value></env><env><name>CURRENCY_SERVICE_ADDR</name><value>currencyservice:7001</value></env><env><name>OTEL_SERVICE_NAME</name><value>checkoutservice</value></env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=checkoutservice,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>FLAGD_PORT</name><value>8013</value></env><env><name>PAYMENT_SERVICE_ADDR</name><value>paymentservice:50051</value></env><env><name>PRODUCT_CATALOG_SERVICE_ADDR</name><value>productcatalogservice:3550</value></env><env><name>OTEL_LOGS_EXPORTER</name><value>otlp</value></env><env><name>CART_SERVICE_ADDR</name><value>cartservice:7070</value></env><env><name>FLAGD_HOST</name><value>flagd</value></env><env><name>KAFKA_SERVICE_ADDR</name><value>kafka:9092</value></env><env><name>EMAIL_SERVICE_ADDR</name><value>http://emailservice:6060</value></env><env><name>CHECKOUT_SERVICE_PORT</name><value>5050</value></env><env><name>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE</name><value>cumulative</value></env><env><name>SHIPPING_SERVICE_ADDR</name><value>shippingservice:50050</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>tag</name><value>checkoutservice</value></log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>logs_exporter</name><value>otlp</value></defaults><defaults><name>productcatalogservice_addr</name><value>productcatalogservice:3550</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-checkoutservice</value></defaults><defaults><name>service_name</name><value>checkoutservice</value></defaults><defaults><name>ports</name><value>5050</value></defaults><defaults><name>paymentservice_addr</name><value>paymentservice:50051</value></defaults><defaults><name>emailservice_addr</name><value>http://emailservice:6060</value></defaults><defaults><name>memory_limit</name><value>120M</value></defaults><defaults><name>shippingservice_addr</name><value>shippingservice:50050</value></defaults><defaults><name>cartservice_addr</name><value>cartservice:7070</value></defaults><defaults><name>otlp_metrics_temporality_preference</name><value>cumulative</value></defaults><defaults><name>currencyservice_addr</name><value>currencyservice:7001</value></defaults><defaults><name>kafkaservice_addr</name><value>kafka:9092</value></defaults></defaults><dependencies><dependencies>otelcol</dependencies><dependencies>shippingservice</dependencies><dependencies>emailservice</dependencies><dependencies>kafka</dependencies><dependencies>flagd</dependencies><dependencies>currencyservice</dependencies><dependencies>paymentservice</dependencies><dependencies>productcatalogservice</dependencies><dependencies>cartservice</dependencies></dependencies><files/></roles><roles><name>grafana</name><tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>grafana/grafana:11.2.0</name><source>pull</source></action><loop/></tasks><tasks><name>Deploy Service</name><vars/><become>true</become><action><type>docker_container</type><name>grafana</name><image>grafana/grafana:11.2.0</image><restart_policy>unless-stopped</restart_policy><memory>100M</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>GF_INSTALL_PLUGINS</name><value>grafana-opensearch-datasource</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>tag</name><value>grafana</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>image_name</name><value>grafana/grafana:11.2.0</value></defaults><defaults><name>ports</name><value>3000</value></defaults><defaults><name>volumes</name><value>./roles/grafana/files/grafana.ini:/etc/grafana/grafana.ini</value></defaults><defaults><name>volumes</name><value>./roles/grafana/files/provisioning/:/etc/grafana/provisioning/</value></defaults><defaults><name>service_name</name><value>grafana</value></defaults><defaults><name>memory_limit</name><value>100M</value></defaults></defaults><dependencies/><files><files><path>/<absolute-path>/ansible/roles/grafana/files/grafana.ini</path></files></files></roles><roles><name>loadgenerator</name><tasks><tasks><name>Deploy Service</name><vars/><become>false</become><action><type>docker_container</type><name>loadgenerator</name><image>ghcr.io/open-telemetry/demo:1.11.1-loadgenerator</image><restart_policy>unless-stopped</restart_policy><memory>1G</memory><state>started</state><network_mode>opentelemetry-demo</network_mode><log_driver>json-file</log_driver><env><env><name>OTEL_RESOURCE_ATTRIBUTES</name><value>service.name=loadgenerator,service.namespace=opentelemetry-demo,service.version=1.11.1</value></env><env><name>LOCUST_HOST</name><value>http://frontendproxy:8080</value></env><env><name>OTEL_EXPORTER_OTLP_ENDPOINT</name><value>http://otelcol:4317</value></env><env><name>LOCUST_WEB_PORT</name><value>8089</value></env><env><name>LOCUST_WEB_HOST</name><value>0.0.0.0</value></env><env><name>FLAGD_PORT</name><value>8013</value></env><env><name>LOCUST_BROWSER_TRAFFIC_ENABLED</name><value>true</value></env><env><name>PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION</name><value>python</value></env><env><name>LOCUST_AUTOSTART</name><value>true</value></env><env><name>OTEL_SERVICE_NAME</name><value>loadgenerator</value></env><env><name>FLAGD_HOST</name><value>flagd</value></env><env><name>KAFKA_SERVICE_ADDR</name><value>kafka:9092</value></env><env><name>PORT</name><value>8080</value></env><env><name>LOCUST_USERS</name><value>10</value></env><env><name>LOCUST_HEADLESS</name><value>false</value></env><env><name>PUBLIC_OTEL_EXPORTER_OTLP_TRACES_ENDPOINT</name><value>http://otelcol:8080/otlp-http/v1/traces</value></env><env><name>OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE</name><value>cumulative</value></env></env><networks><networks><name>name</name><value>opentelemetry-demo</value></networks></networks><log_options><log_options><name>tag</name><value>loadgenerator</value></log_options><log_options><name>max-file</name><value>2</value></log_options><log_options><name>max-size</name><value>5m</value></log_options></log_options></action><loop/></tasks><tasks><name>Pull the latest Docker image</name><vars/><become>false</become><action><type>docker_image</type><name>ghcr.io/open-telemetry/demo:1.11.1-loadgenerator:1.11.1-loadgenerator</name><source>pull</source></action><loop/></tasks></tasks><handlers/><vars/><defaults><defaults><name>protobuf_python</name><value>python</value></defaults><defaults><name>locust_web_host</name><value>0.0.0.0</value></defaults><defaults><name>ports</name><value>8089</value></defaults><defaults><name>frontendproxy_port</name><value>8080</value></defaults><defaults><name>frontendproxy_addr</name><value>http://frontendproxy:8080</value></defaults><defaults><name>image_name</name><value>ghcr.io/open-telemetry/demo:1.11.1-loadgenerator</value></defaults><defaults><name>memory_limit</name><value>1G</value></defaults><defaults><name>service_name</name><value>loadgenerator</value></defaults><defaults><name>locust_users</name><value>10</value></defaults><defaults><name>locust_autostart</name><value>true</value></defaults><defaults><name>locust_headless</name><value>false</value></defaults><defaults><name>otlp_metrics_temporality_preference</name><value>cumulative</value></defaults><defaults><name>locust_browser_traffic_enabled</name><value>true</value></defaults><defaults><name>otlp_exporter_traces_endpoint</name><value>http://otelcol:8080/otlp-http/v1/traces</value></defaults><defaults><name>kafkaservice_addr</name><value>kafka:9092</value></defaults></defaults><dependencies><dependencies>flagd</dependencies><dependencies>frontend</dependencies></dependencies><files/></roles></roles><vars><vars><name>network_name</name><value>opentelemetry-demo</value></vars><vars><name>flagd_host</name><value>flagd</value></vars><vars><name>log_options_max_size</name><value>5m</value></vars><vars><name>demo_version</name><value>1.11.1</value></vars><vars><name>state</name><value>started</value></vars><vars><name>restart_policy</name><value>unless-stopped</value></vars><vars><name>log_driver</name><value>json-file</value></vars><vars><name>otel_collector_port_http</name><value>4318</value></vars><vars><name>log_options_max_file</name><value>2</value></vars><vars><name>otel_collector_port_grpc</name><value>4317</value></vars><vars><name>flagd_port</name><value>8013</value></vars><vars><name>envoy_port</name><value>8080</value></vars><vars><name>otel_collector_host</name><value>otelcol</value></vars></vars></plays></plays></AnsibleDeploymentModel>